<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../rxjs-import/rxjs-import.html" />

<link rel="import" href="../increment-panel/increment-panel.html" />

<dom-module id="increment-display">
	<template>
		<div>[[value]]</div>
		<increment-panel id='incrementPanel' decrement-label="subtract" increment-label="add"></increment-panel>
	</template>
	<script>
		Polymer({
			is: 'increment-display',
			properties: {
				value: {
					type: Number,
					value: 0
				},
				step: {
					type: Number,
					value: 1
				},
				startingValue: {
					type: Number,
					value: 0
				}
			},
			ready: function () {
				var incrementPanel = this.$.incrementPanel;
				var self = this;

				this.value = this.startingValue;

				incrementPanel.deltaSource.scan(function(acc, delta) {
					return acc + (delta * self.step);
				}, self.startingValue).subscribe(function (value) {
					self.value = value;
				});
			}
		});
	</script>
</dom-module>
